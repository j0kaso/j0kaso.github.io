<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>Sharing-MDsrv</title>

        <meta name="description" content="">
        <meta name="author" content="Johanna K S Tiemann">

        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/white.css" id="theme">

        <!-- Theme used for syntax highlighting of code -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

    <style>
        .reveal .slides > section {
            background-color: rgba(255, 255, 255, 0.9);
        }
        .inactive {
            color: #999;
        }
        .warning {
            color: #eea236;
        }
        .success {
            color: #4cae4c;
        }
        .top {
            top: 100px !important;
        }
        .bottom {
            top: unset !important;
            bottom: 100px !important;
        }
        .reveal .speaker-notes {
            width: 50%;
            left: 25%;
        }

        .x {
            position:relative;
        }

        .x:before, .x:after{
            content:'';
            position:absolute;
            width:100%;
            height:10px;
            background-color:tomato;
            top:140px;
        }

        .x:before {
            -webkit-transform:rotate(45deg);
            -moz-transform:rotate(45deg);
            transform:rotate(45deg);
            left:2px;
        }
        .x:after {
            -webkit-transform:rotate(-45deg);
            -moz-transform:rotate(-45deg);
            transform:rotate(-45deg);
            right:2px;
        }
    </style>
        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="reveal">


            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">
                <small id="busy" style="display:none; position:absolute; top:0px; right:0px;">Loading...</small>

                <div id="viewport" style="width:960px; height:700px;"></div>
<!-- <img style="z-index:99; width:20%; position:absolute; right:0px; bottom:0px;" src="img/L-logo.jpg" /> -->



<!-- INTRO -->

                <section data-state="slide-loading">
                    <h2 id="status">Loading...</h2>
                </section>

                <section data-state="slide-title">
                    <div>Session II: Tools for Trajectory File Sharing</div>
                    <h2 style="text-transform: none">Viewing and sharing molecular dynamics simulations on the web</h2>
                    <br>
                    <p><small>2018-11-26</small></p>
                    <p><small>Johanna Tiemann<br>AG Hildebrand &minus; University Leipzig</small></p>
                    <img class="plain" style="width:20%;" src="img/L-logo.jpg" />
                    <aside class="notes">
                            Many thanks for your kind introduction Daniel and many thanks to the organizers for inviting me to this great workshop. I feel very honored to speak to introduce to you the session tools for trjaectory file sharing with my favorit example, the MDsrv.
                        </aside>
                </section>
                <section  style="z-index:100">
                    <section data-state="slide-billion">
                        <h3>SHARING - why should I care?</h3>
                        <br>
<!--                         <p class="fragment">Goal of science: explain, predict & apply</p>
                        <p class="fragment"><strong>scientists want to share & exchange</strong></p>
 -->                        <br>
<!--                            <li>professional data publishers offering their services; </li>
                            <li>software and tool-builders providing data analysis and processing services such as reusable workflows; </li>
                            <li>funding agencies (private and public) increasingly concerned with long-term data stewardship: and a data science community mining, integrating and analysing new and existing data to advance discovery.</li>
                          <li>improve reviewing & publication standards</li>
                            <li class="fragment">bridge between science & publicity / bringing science closer to publicity</li>-->
                        <figure role="group">
                            <img class="plain" style="width:50%" src="img/collaboration.jpg" />
                            <figcaption><font size="2">www.wikicsr.it</font></figcaption>
                        </figure>
                        <aside class="notes">
                            Obviously, I do not have to motivate to you why sharing is important and necessary, because you care as your came here to this meeting. You/We know, that we can not achive knowledge by just ourself, scientists have to 

                            Talking about sharing - why should I care? Easy as it is, it lies within the very goal of science: The main goal of science is to not only to describe but explain the phenomena in our Universe, their mechanisms & laws that regulate it. Besides explaining those phenomena, science aims to predict events based on natural laws. And finally, the knowledge obtained by science can be applied to develop new technologies & applications.
                            This global goal can not be reached by just a single person, therefore it lies in the very nature of scientist to exchange and discuss their observations and interpretations. By sharing their knowledge, it gets reused to gain further knowledge and thereby gives credit to the scientists themselves.
                            Obviously, scientists in general want to share and exchange. So what's the problem?
                        </aside>
                    </section>
<!--                    <section>
                        <h3>What's the problem?</h3>
                        <p class="fragment">MD = data-intensive science</p>
                        <aside class="notes">
                            Molecular Dynamics belongs to the data-intensive sciences by generating huge amounts of complex data in even different formats. This makes it obviously difficult to share. So what's the current standard in MD sharing?
                        </aside>
                    </section>
                -->
                    <section>
                        <h3>What's the current standard?</h3>
                        <table >
                                <th class="fragment" >
                                    <p align="center">Text/Tables</p>
                                    <p align="center">&#8659;</p>
                                    <div style="width: 300px;"><img class="plain" src="img/pubmed2.png" /></div>
                                </th>
                                <th class="fragment" >
                                    <p align="center">Figures</p>
                                    <p align="center">&#8659;</p>
                                    <div style="width: 300px;"><img class="plain"src="img/ncomms14505-f10.jpg" /></div>
                                </th>
                                <th class="fragment" >
                                    <p align="center">Video</p>
                                    <p align="center">&#8659;</p>
                                    <div align="center" style="width: 300px; height: 300px"><video data-autoplay loop="2" src="./data/ncomms14505-s3.mp4"></video></div>
                                </th>
                        </table>
<!--                         <p class="fragment"><small>recently: distribution of "raw data"</small></p>
 -->                        <p style="position: absolute; bottom: 0px; right: 0px; left: 0px;"><font size="2" ><a href="http://dx.doi.org/10.1038/ncomms14505">Guixà-González, et al. (2017). Membrane cholesterol access into a G-protein-coupled receptor. Nat Commun., 8, 14505.</a> </font></p>
                        <aside class="notes">
                            MD studies are mainly shared via publications in Journals, presented on Conferences or spread through Social Media.
                            Depending where they are presented, trajectory output is converted into texts or tables, figures and at the best videos. Just recently and still rarely, raw trajectory files are also distributed directly via scientific data sharing resources.
                            These three examples give already a glimpse on the powerful role of visualization of biological processes. 

                        --> limits audience
                        </aside>
                    </section>
<!--                     <section data-transition="none">
                        <h3 style="position: absolute; top: 0px; left: 0px; right: 0px;">Biology is not static!</h3>
                        <br>
                        <div>
                            <img class="plain" style="width:40%" src="img/sim2.png" />
                            <!-- <img class="plain" style="width:40%" src="img/ncomms14505-f10.jpg" /> -->
<!--                            <br>
                            <p>A <strong>picture</strong> is worth a thousand words!</p>
                        </div>

                        <aside class="notes">
                            But just until recently, biological processes have been only seen as static pictures or structures. But actually, the dynamics is key to understand the complex function of them.
                        </aside>
                    </section>
                    <section data-transition="none">
                        <h3 style="position: absolute; top: 0px; left: 0px; right: 0px;">Biology is not static!</h3>
                        <br>
                        <div align="center"><video data-autoplay loop="2" src="./data/ncomms14505-s3.mp4"></video></div>
                        <p style="position: absolute; bottom:-151px; left: 0px; right: 0px;">A <strong>movie</strong> is worth a million words! </p>
                        <aside class="notes">
                            Visualization plays here a key role, as it gives intuitive and instant understanding of what is actually happening. This is especially true for dynamics!
                            So why are we not satisfied with just a video? 
                        </aside>
                    </section>
 -->                    <section data-state="slide-title" data-transition="none">
                        <h3 style="position: absolute; top: 0px; left: 0px; right: 0px;">Biology is not static!</h3>
                        <p style="position: absolute; bottom:-692px; left: 0px; right: 0px;"><strong>Interactive</strong> visualization is <strong>priceless</strong>!</p>
                        <aside class="notes">
                            Easy as it is, a video does not tell us the whole story! Only interactive access to the dynamics allow us to satisfy our thirst for knowledge, to explore the dynamics by ourself and to follow our own ideas, interest and focus or to just change the view how you look at it.
                            Aus allen winkeln so angucken wie ich will.
                            Und so sollte der Standard eigentlich sein, wie es geteilt wird!
                            Dann kam Peter 6 Alex auf mich zu und mich gefragt, ob ich das nicht implementieren will. Sure! Dann musste ich mich damit auseinander setzen,w as die hürden waren---Aber was sind denn die Probleme, was waren die hürden 



                        </aside>
                    </section>
                    <section data-state="slide-billion">
                        <h3>Why visual sharing is difficult...</h3>
                        <br>
                        <ul>
                            <li class="fragment">file size & formats</li>
                            <li class="fragment">specialized software & setups</li>
                            <li class="fragment">processed/raw trajectories</li>
                            <li>exchangablility?</li>
                            <p class="fragment">&rarr; expert knowledge</p>
                        </ul>
                        <p class="fragment">&rArr; limits audience</p>
                        <br>
                        <div class="fragment">
                            <p><strong>Solution: MDsrv</strong><br>visualize & share MDs over the web</p>
                            <br>
                            <p style="position: absolute; bottom: 0px; right: 0px; left: 0px;"><font size="2" ><a href="http://dx.doi.org/10.1038/nmeth.4497">Tiemann, et al. (2017). MDsrv: viewing and sharing molecular dynamics simulations on the web. Nat Methods., 14 (12), 1123-1124.</a> </font></p>
                        </div>
                        <aside class="notes">

I found that solutions of most of the problems are already available.

Fir instance - the best and easiest way to share is the web

                            Unfortunately, it is not that easy.
                            As MD belongs to the data-intensive sciences, sharing is hindered by large file sizes and different file formats.
                            Additionally, visualizing MD trajectories demand specialized, standalone software, setups and processed trajectories. So in the end, expert knowledge.
                            This heavily limits the audience to which MD is available.
                            Here I present you our solution the MDserver, which is the first tool to visualize and share MDs over the web by utilizing/applying WebGL and HTML5.
                            And that's how it all began. / our success story began.
                        </aside>
                    </section>
                </section>
<!-- MDsrv -->
                <section>
                    <section>
                        <h3>NGL & web developments</h3>
                        <p>Web visualization is awesome!</p>
                        <p>HTML5 & WebGL supersede plug-ins (Java Applets/Flash)</p>
                        <table >
                                <th>
                                    <div style="width: 600px;"><img class="plain" src="img/NGL.png" /></div>
                                </th>
                                <th>
                                    <p align="center">Figures</p>
                                    <p align="center">&#8659;</p>
                                    <div style="width: 600px;"><img class="plain"src="img/Alex.jpg" /></div>
                                </th>
                        </table>
                        <p style="position: absolute; bottom: 0px; right: 0px; left: 0px;"><font size="2" ><a href="http://dx.doi.org/10.1093/nar/gkv402">Rose & Hildebrand (2015). NGL Viewer: a web application for molecular visualization. Nucleic Acids Res., 43(W1), W576-9.</a> </font></p>
                        <aside class="notes">
                            Browser-based visualization has long been used as it simplifies access to results of structure-related calculations from web tools and allows quick depiction of entries in on-line structural databases.
                            Until recently, web browsers could not display 3D content without additional plug-ins like Java Applets or Flash. With the rise of the web as a platform for applications, more capabilities have been added to the web browsers, including HTML5 and the web browser programming language JavaScript. Together with its access to dedicated graphics hardware through WebGL API (application programming interface) (a standard based on the OpenGL ES 2.0 API) to calculate on the GPU (graphics processor unit) directly, rendering performance and quality has notably improved. By now, WebGL and HTML5 is now standard in every modern web browser. 
                            This improvements allowed Alex Rose the development of the NGL Viewer in our lab, 

                            ... and he went to the RCSB pdb to install this viewer as standard to the pdb. 3 years later, it's now everywshere! which is now the standard viewer within the RCSB PDB and many other scientific structural biology websites.
                            By leveraging modern web technologies such as WegGL, the NGL Viewer provides scalable molecular graphics allowing the display of large macromolecular assemblies including ribosomes and virus capsids.
                            
                        </aside>
                    </section>
                    <section>
                        <h3 style="text-transform: none">MDsrv</h3>
                        <img style="width: 50%;" class="plain" src="img/MDsrv.png" />
                        <aside class="notes">
                            <ul>
                                <li>interactive & remote exploration of trajectories</li>
                                <li>client-server architecture</li>
                                <li>utilizes GPU accelerated 3D graphics</li>
                                <li>Supports structures, topologies & trajectories from common MD packages including Amber, gromacs, NAMD, Tinker, Desmond by utilizing MDAnalysis & MDTraj</li>
                                <li>display of unprocessed data:</li>
                                  <li>scripting</li>
                                <li>embedding or GUI (allowing creation of complex molecular scenes)</li>
                                <li>trajectory controls:</li>
                                <li>export high-resolution images & download PDB-formatted files</li>
                                <li>facilitate interactive exploration, collaborative analysis & promote discussion</li>
                            </ul>
                        </aside>
                    </section>

                    <section data-transition="none">
                        <h3>Implementation</h3>
                        <img style="width: 50%;" class="plain" src="img/implementation.png" />
                        <p class="fragment" align="left"><strong>(A) Server component:</strong></p>
                        <p class="fragment" >WSGI compliant web server (utilizing Python & Flask) handles static server, trajectory files and ensures basic access control</p>
                        <aside class="notes">
                            <li>Serve static JavaScript, HTML, CSS, GLSL, font...</li>
                            <li>Provide data files (traj, struc, script)</li>
                            <li>Handle requests for trajectory frames</li>
                            <li>Ensure basic access control to server, specific data directories or none</li>
                            <li>two modes of operation</li>
                            <ul>
                                <li>easy-to-use command-line tool for local service</li>
                                <li>deploy on server to provide a dedicated streaming service</li>
                            </ul>
                        </aside>
                    </section>
                    <section data-transition="none">
                        <h3>Implementation</h3>
                        <img style="width: 50%;" class="plain" src="img/implementation.png" />
                        <p align="left"><strong>(B) Trajectory serving:</strong></p>
                        <p class="fragment">Provides access to vast amounts of trajectory formats by using function derived from SimpleTraj, MDTraj & MDAnalysis</p>
                        <aside class="notes">
                            <li>Supports structures, topologies & trajectories from common MD packages including Amber, gromacs, NAMD, Tinker, Desmond by utilizing MDAnalysis & MDTraj</li>
                        </aside>
                    </section>
                    <section data-transition="none">
                        <h3>Implementation</h3>
                        <img style="width: 50%;" class="plain" src="img/implementation.png" />
                        <p align="left"><strong>(C) Visualization via NGL:</strong></p>
                        <p class="fragment">JavaScript written, GUI / embedded viewer reads, processes & updates structures & representations and renders on GPU using WebGL.</p>

                        <aside class="notes">
                            <ul>
                                <li>Reading, processing and updating of molecular structures</li>
                                <li>Transforming molecular structures into display representations</li>
                                <li>Rendering of display representations on the GPU using WebGL</li>
                                <li>Creating an interactive user interface, GUI, scripting support</li>
                                <li>display of unprocessed data:</li>
                            <ul>
                                <li>on-the fly superposition to reference structure or first frame of trajectory</li>
                                <li>handling periodic boundary conditions</li>
                                <li>secondary structure assignment</li>
                                <li>--> only applyed to displayed frames</li>
                            </ul>
                            <li>NGL:</li>
                            <ul>
                                <li>molecular representations: spacefill, ball, stick, cartoon, molecular surface</li>
                                <li>fine tuning by various parameters, e.f. change the rendering quality, color or size</li>
                            </ul>
                            <li>scripting</li>
                            <li>embedding or GUI (allowing creation of complex molecular scenes)</li>
                            <li>trajectory controls:</li>
                            <ul>
                                <li>play, pause, speed, frame increment, display of simulation time</li>
                                <li>spline</li>
                            </ul>
                            <li>export high-resolution images & download PDB-formatted files</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <h3>Some examples</h3>
                        <ul>
                            <li><a href="http://proteinformatics.charite.de/html/embedded_example_1.html">Published simulation embedded next to the reference</a></li>
                            <li><a href="http://proteinformatics.charite.de/html/embedded_example_2.html">Simulation within a wiki-like article</a></li>
                                <li><a href="http://proteinformatics.charite.de/html/mdsrvdev.html?load=file://MDsrv/script6.ngl">GUI Coarse-Grained simulation</a></li>
                        </ul>
                    </section>
                </section>
                <section>
                    <section>
                        <h3>Limitations & how to overcome them</h3>
                        <p>MDsrv reaches towards each single researcher</p>
                        <p>What simulations should be uploaded?</p>
                        <aside class="notes">
                            <p>If it is ok with you, through this practical example, you may present few limitations you may have encountered and maybe some solutions you found to overcome these limitations (if you find some). The idea is to give a practical case to serve as an introduction for the main discussion part during the session:  "Tools for trajectory file sharing".</p>
                        </aside>
                        <p>see the bigger picture</p>
                    </section>
                    <section>
                        <h3>What's out there?</h3>
                        <p class="fragment" align="left"><strong>Scientific data sharing resources:</strong></p>
                        <ul>
                            <li class="fragment">e.g. OSF, FigShare, Zenodo, Dataverse, Dryad, Mendeley Data, DataHube</li>
                            <li class="fragment">open, free, easy usable</li>
                            <li class="fragment">few restrictions, no requirements</li>
                            <li class="fragment">Problem: no attempt to integrate / harmonize data</li>
                        </ul>
                        <p class="fragment">&rarr; more about this later</p>
                        <p class="fragment" align="left"><strong>Visualization resources:</strong></p>
                        <ul>
                            <li class="fragment">VMD streamlining</li>
                            <li class="fragment"><strong>MDsrv</strong>, HTMoL</li>
                        </ul>
                        <aside class="notes">
                           accepting a wide range of data types in a wide variety of formats (not attempt to integrate or harmonize the deposited dataM few restrictions (or requirements 
                        </aside>
                    </section>
                    <section>
                        <h3>Problems by current sharing culture</h3>
                        <ul>
                            <li>moving away from centralization</li>
                            <li>becoming more diverse</li>
                            <li>less integrated</li>
                            <li>problematic for re-usability</li>
                        </ul>
                        <br>
                        <br>
                        <p class="fragment" ><strong>FAIR principles</strong></p>
                        <p class="fragment" >&rarr; GPCRmd</p>
                        <br>
                        <br>
                        <p style="position: absolute; bottom: 0px;"><font size="2" ><a href="http://dx.doi.org/10.1038/sdata.2016.18">Wilkinson, et al. (2016). The FAIR Guiding Principles for scientific data management and stewardship. Scientific Data, 3, 160018.</a> </font></p>
                        <aside class="notes">
                            <ul>
                                <li>Findable</li>
                                <li>Accessible</li>
                                <li>Interoperable</li>
                                <li>Reproducible</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
    <!--                    <blockquote>
                            &ldquo;If you have knowledge, let others light their candles in it.&rdquo;
                            <small>Margaret Fuller (1810 - 1850, Journalist, Critic and Women’s Rights Activist)</small>
                        </blockquote>
                        <blockquote>
                            &ldquo;Knowledge alone is not power. The sharing of our knowledge, is when knowledge becomes powerful.&rdquo;
                            <small>Rich Simmonds (Change Maker & Social Influencer)</small>
                        </blockquote> -->
                        <blockquote>
                            &ldquo;All knowledge is connected to all other knowledge. The fun is in making the connections.&rdquo;
                            <small>Arthur C. Aufderheide (1922 - 2013, paleopathologist)</small>
                        </blockquote>
                        <br>
                        <h3>Thank you!</h3>
                        <br>
                        <small><p>Peter Hildebrand (University Leipzig & Charité Berlin)</p>
                        <p>Ramon Guixà-Gonzáles (Charité Berlin & Universitat Autònoma de Barcelona)</p>
                        <p>Alex Rose (UC San Diego)</p></small>
                    </section>
                </section>
<!-- #################################################################################### -->
            </div>

        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>
        <script src="js/ngl.js"></script>
        <script>

var stage;
document.addEventListener( "DOMContentLoaded", function(){
    Reveal.initialize({
        controls: false,
        showNotes: false,
        width: 960,
        height: 700,
        // width: 1280,
        // height: 933,
        dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true },
                    { src: 'plugin/notes/notes.js', async: true },
                 ]
    });

    var notesFlag = true;
    function toggleNotes(){
        var elmList = document.querySelectorAll( ".reveal .speaker-notes.visible:not(:empty)" );
        for( var i = 0, il = elmList.length; i < il; ++i ){
            elmList[ i ].style.display = notesFlag ? "none" : "block";
        }
        notesFlag = !notesFlag;
    }
    toggleNotes();
    window.addEventListener( "keyup", function( e ){
        if( e.which === 83 ){
            toggleNotes( notesFlag );
        }
    }, false );


    stage = new NGL.Stage( "viewport", {
        backgroundColor: "white",
        sampleLevel: -1
    } );
    function handleResize(){
        stage.handleResize();
    }
    window.addEventListener( "resize", handleResize, false );

    stage.tasks.signals.countChanged.add( function( delta, count ){
        document.getElementById( "busy" ).style.display = count > 0 ? "block" : "none";
        document.getElementById( "status" ).innerHTML = count > 0 ? "Loading..." : "Ready!";
    } );


    var _A2A_C;
    var trajComp;
    var player;
    stage.loadFile( "./data/entrance_wrapped.gro", {asTrajectory: true} ).then( function( comp ){
        _A2A_C = comp;
        comp.addRepresentation( "tube", { sele: "", opacity: 1, side: "front" } );
        comp.addRepresentation( "hyperball", { visible: true, sele: "CHL1 and 59 and not hydrogen", colorValue: "#ff3900", colorScheme: "element", opacity: 0.9 } );
        stage.setOrientation([[-0.08918625838576302,1.9883218034604453,4.486656641720855],[126.77370242780779,1.4149585652999876,22.87269897008708],[-0.14316526306884436,-0.09882771206771168,0.9847521468765403]])
        trajComp = comp.addTrajectory();
        player = new NGL.TrajectoryPlayer( trajComp.trajectory );
        player.play();

    } );
    function centerGroup( group, center ){
        group.children.forEach( function( child ){
            child.position.copy( center );
        } );
    }
    function centerBuffer( buffer, center ){
        centerGroup( buffer.group, center );
        centerGroup( buffer.wireframeGroup, center );
        centerGroup( buffer.pickingGroup, center );
    }
    function centerRepr( reprComp, center ){
        reprComp.repr.bufferList.forEach( function( buffer ){
            centerBuffer( buffer, center );
        } );
    }
    function hideAll(){
        stage.eachComponent( function( comp ){
            comp.setVisibility( false );
        } );
    }

    Reveal.addEventListener( "slide-title", function(){
        hideAll();
        _A2A_C.setVisibility( true );
      //  _A2A_C.centerView();
     //   _pep.setVisibility( true );
     //   _pep.centerView();
    }, false );

    Reveal.addEventListener( "slide-billion", function(){
        stage.setSpin( null );
        stage.setParameters( { clipNear: 0 } );
        hideAll();
    }, false );

    Reveal.addEventListener( "slide-status", function(){
        stage.setSpin( null );
        stage.setParameters( { clipNear: 0 } );
        hideAll();
    }, false );


    Reveal.addEventListener( "slide-scale", function(){
        stage.setSpin( null );
        stage.setParameters( { clipNear: 0 } );
        hideAll();
    }, false );

    var viewer = stage.viewer;
    var controls = viewer.controls;
    var camera = viewer.camera;

    var target = new NGL.Vector3();
    var target0 = new NGL.Vector3();
    var targetN = new NGL.Vector3();


    Reveal.addEventListener( "slide-scale2", function(){
        _3J3Qsurface.setVisibility( true );
        _1M4Xsurface.setVisibility( true );
        _5J7Vsurface.setVisibility( true );
        _3J3Qsurface.setParameters( { side: "double" } );
        _1M4Xsurface.setParameters( { side: "double" } );
        _5J7Vsurface.setParameters( { side: "double" } );
        _3J3Q.setVisibility( true );
        _1M4X.setVisibility( true );
        _5J7V.setVisibility( true );

        var t0 = performance.now();
        function animate(){
            var delta = performance.now() - t0;
            var alpha = Math.min( 1.0, delta / 5000 );
            stage.setParameters( { clipNear: 50 * alpha } );
            viewer.requestRender();
            if( alpha < 1.0 ){
                requestAnimationFrame( animate );
            }else{
                stage.setSpin( null );
            }
        }
        animate();

    }, false );

    Reveal.addEventListener( "slide-ngl", function(){
        stage.setSpin( null );
        stage.setParameters( { clipNear: 0 } );
        hideAll();
    }, false );

} );
        </script>

    </body>
</html>
